<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>程序设计练习——三天打鱼两天晒网 &#8211; Neteen Blog</title> <meta name="description" content="occupied with moon theme of jelly"> <meta name="keywords" content="homework, 作业, java"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="http://jlwebs.github.io/img/3tdy2tsw-3.png"> <meta name="twitter:title" content="程序设计练习——三天打鱼两天晒网"> <meta name="twitter:description" content="程序设计练习——“三天打鱼两天晒网”"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="程序设计练习——三天打鱼两天晒网"> <meta property="og:description" content="程序设计练习——“三天打鱼两天晒网”"> <meta property="og:url" content="http://localhost:4000/%E6%89%93%E9%B1%BC%E6%99%92%E7%BD%91%E9%A2%98%E7%9B%AE/"> <meta property="og:site_name" content="Neteen Blog"> <meta property="og:image" content="http://localhost:4000/assets/img/logo.png"> <link rel="canonical" href="http://localhost:4000/%E6%89%93%E9%B1%BC%E6%99%92%E7%BD%91%E9%A2%98%E7%9B%AE/"> <link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Neteen Blog Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css"> <!-- JS --> <script src="http://localhost:4000/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="http://localhost:4000/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="http://localhost:4000/favicon.png" /> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" /> <!-- Background Image --> <style type="text/css">body {background-image:url(http://localhost:4000/assets/img/placeholder-big2.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> <style type="text/css">.feature {background-image:url(http://jlwebs.github.io/img/3tdy2tsw-3.png);}</style> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="http://localhost:4000/">Home</a></li> <li> <a href="#">关于</a> <ul class="dl-submenu"> <li> <img src="http://localhost:4000/assets/img/logo.png" alt="Neteen Blog photo" class="author-photo"> <h4>Neteen Blog</h4> <p>occupied with moon theme of jelly</p> </li> <li><a href="http://localhost:4000/about/"><span class="btn btn-inverse">详情</span></a></li> <li> <a href="http://instagram.com/username" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-instagram"></i> Instagram</a> </li> <li> <a href="http://github.com/jlwebs" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> <li> <a href="http://steamcommunity.com/id/username" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-steam-square"></i> Steam</a> </li> </ul>
<!-- /.dl-submenu --> </li> <li> <a href="#">文章</a> <ul class="dl-submenu"> <li><a href="http://localhost:4000/posts/">所有文章</a></li> <li><a href="http://localhost:4000/tags/">所有标签</a></li> </ul> </li> <li><a href="http://localhost:4000/projects/">项目</a></li> <li><a href="//neteen.online">主站</a></li>
</ul>
<!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title feature "> <h1>程序设计练习——三天打鱼两天晒网</h1> <h4>30 Aug 2018</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> 阅读时长 ~1 分钟 </p>
<!-- /.entry-reading-time --> <a class="btn zoombtn" href="http://localhost:4000/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <p>程序设计练习——“三天打鱼两天晒网”</p> <h4 id="question">question</h4> <p><em>中国有句俗语叫</em></p> <blockquote> <p>“三天打鱼两天晒网”。</p> </blockquote> <p><em>某人从2010年1月1日起开始“三天打鱼两天晒网”，问这个人在以后的某一天中是“打鱼”还是“晒网”。</em></p> <hr> <h4 id="begin">begin</h4> <p>分析过程： 首先，加载文件使用字节流转换到字符流，最后通过BufferedReader一行行读取出来，性能更高； 然后，使用Date类表达日期，使用SimpleDateFormat格式化读取和输出时间， 关键点第一个在于如何判断日期合法性，涉及年份以及数字有效检验，以下情况：</p> <p><em>1：由于日期有非法字符导致的parse过程异常而不合法</em></p> <p>*2：由于parse转化会导致越界和负数自动归化日期，我们需要满足严格格式，故再format和原字符串比较判断 *</p> <p>*3：日期范围不正确，我们要求2010年以后时间才能正确计算，通过Date类转Calendar类，获取Year字段进行判断 *</p> <p><img class="emoji" title=":expressionless:" alt=":expressionless:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f611.png" height="48" width="48">下面是代码<img class="emoji" title=":sweat_drops:" alt=":sweat_drops:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4a6.png" height="48" width="48"></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">FishOrPrepare</span> <span class="o">{</span>
    	<span class="cm">/**
    	 *  题目：三天打鱼两天晒网
    	 **/</span>
    	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">ParseException</span>  <span class="o">{</span>
    		<span class="cm">/* 
    		 	加载文件使用字节流转换到字符流，最后通过BufferedReader一行行读取出来，性能更高
    		 */</span>
    		<span class="n">BufferedInputStream</span> <span class="n">biss</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    		<span class="n">InputStreamReader</span> <span class="n">isr</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    		<span class="n">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    		<span class="n">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
    		<span class="n">String</span> <span class="n">out</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
    		<span class="kd">final</span> <span class="n">String</span> <span class="n">path</span> <span class="o">=</span> <span class="s">"D:\\Program Files (x86)\\QQ\\330639889\\AppWebCache\\"</span><span class="o">;</span>
    		<span class="k">try</span> <span class="o">{</span>
    			<span class="n">biss</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedInputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">path</span><span class="o">+</span><span class="s">"in.txt"</span><span class="o">));</span>
    			<span class="n">isr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">biss</span><span class="o">);</span>
    			<span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="n">isr</span><span class="o">);</span>
    			<span class="k">while</span><span class="o">((</span><span class="n">str</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">())!=</span><span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    				<span class="cm">/* 
    			 		使用Date类表达日期，使用SimpleDateFormat格式化读取和输出时间
    				 */</span>
    				<span class="n">SimpleDateFormat</span> <span class="n">sdf</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyyMMdd"</span><span class="o">);</span>
    				<span class="n">SimpleDateFormat</span> <span class="n">sdf2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyy年MM月dd日"</span><span class="o">);</span>
    				<span class="n">Date</span> <span class="n">beginDate</span> <span class="o">=</span> <span class="n">sdf</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"20100101"</span><span class="o">);</span>
    				<span class="n">Date</span> <span class="n">d</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    				<span class="k">try</span> <span class="o">{</span>	
    					<span class="n">d</span> <span class="o">=</span> <span class="n">sdf</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>
    
    				<span class="o">}</span><span class="k">catch</span> <span class="o">(</span> <span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
    					<span class="cm">/*	由于日期有非法字符导致的parse过程异常而不合法 */</span>
    					<span class="n">out</span> <span class="o">+=</span> <span class="n">str</span> <span class="o">+</span> <span class="s">"  日期输入不合法"</span><span class="o">+</span><span class="s">"\r\n"</span><span class="o">;</span>
    					<span class="k">continue</span><span class="o">;</span>
    				<span class="o">}</span>
    				<span class="k">if</span> <span class="o">(!(</span><span class="n">str</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">sdf</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">d</span><span class="o">))))</span> <span class="o">{</span>
    					<span class="cm">/* 由于parse转化会导致越界和负数自动归化日期，我们需要满足严格格式
    					 * 故再format和原字符串比较判断 */</span>
    					<span class="n">out</span> <span class="o">+=</span> <span class="n">str</span> <span class="o">+</span> <span class="s">"  "</span><span class="o">+</span><span class="s">"日期输入不合法"</span><span class="o">+</span><span class="s">"\r\n"</span><span class="o">;</span>
    					<span class="k">continue</span><span class="o">;</span>
    				<span class="o">}</span>
    				<span class="n">Calendar</span> <span class="n">cal</span> <span class="o">=</span> <span class="n">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
    				<span class="n">cal</span><span class="o">.</span><span class="na">setTime</span><span class="o">(</span><span class="n">d</span><span class="o">);</span>
    				<span class="k">if</span><span class="o">(</span><span class="n">cal</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Calendar</span><span class="o">.</span><span class="na">YEAR</span><span class="o">)&lt;</span><span class="mi">2010</span><span class="o">)</span> <span class="o">{</span>
    					<span class="n">out</span> <span class="o">+=</span> <span class="n">sdf2</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">d</span><span class="o">)</span> <span class="o">+</span> <span class="s">"  "</span> <span class="o">+</span> <span class="s">"日期范围不正确"</span><span class="o">+</span><span class="s">"\r\n"</span><span class="o">;</span>
    					<span class="k">continue</span><span class="o">;</span>
    				<span class="o">}</span>
    				
    				<span class="kt">int</span> <span class="n">days</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">((</span><span class="n">d</span><span class="o">.</span><span class="na">getTime</span><span class="o">()</span> <span class="o">-</span> <span class="n">beginDate</span><span class="o">.</span><span class="na">getTime</span><span class="o">())</span> <span class="o">/</span> <span class="o">(</span><span class="mi">1000</span><span class="o">*</span><span class="mi">3600</span><span class="o">*</span><span class="mi">24</span><span class="o">));</span>
    				<span class="n">out</span> <span class="o">+=</span> <span class="n">sdf2</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">d</span><span class="o">)+</span><span class="s">"  "</span><span class="o">+</span><span class="s">"这是第："</span><span class="o">+(</span><span class="n">days</span><span class="o">+</span><span class="mi">1</span><span class="o">)+</span><span class="s">"天"</span><span class="o">+</span><span class="s">"\r\n"</span><span class="o">;</span>
    				<span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">days</span> <span class="o">%</span> <span class="mi">5</span><span class="o">;</span>
    				<span class="k">if</span><span class="o">(</span><span class="n">result</span><span class="o">&gt;=</span><span class="mi">0</span> <span class="o">&amp;&amp;</span><span class="n">result</span><span class="o">&lt;=</span><span class="mi">2</span><span class="o">)</span>
    					<span class="n">out</span> <span class="o">+=</span> <span class="s">"guy: 俺在钓鱼"</span><span class="o">+</span><span class="s">"\r\n"</span><span class="o">;</span>
    				<span class="k">else</span>
    					<span class="n">out</span> <span class="o">+=</span> <span class="s">"guy: 晒网中"</span><span class="o">+</span><span class="s">"\r\n"</span><span class="o">;</span>
    			<span class="o">}</span>
    			<span class="n">writeOut</span><span class="o">(</span><span class="n">path</span><span class="o">+</span><span class="s">"out.txt"</span><span class="o">,</span><span class="n">out</span><span class="o">);</span>
    			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"完成！查看out.txt文件结果"</span><span class="o">);</span>
    		<span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"找不到指定文件"</span><span class="o">);</span>
    		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"读取文件失败"</span><span class="o">);</span>
    		<span class="o">}</span><span class="k">finally</span> <span class="o">{</span>
    			<span class="k">try</span> <span class="o">{</span>
    			     <span class="n">br</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    			     <span class="n">isr</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    			     <span class="n">biss</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    			    <span class="c1">// 关闭的时候最好按照先后顺序关闭最后开的先关闭</span>
    		   <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    			   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"关闭文件流出错"</span><span class="o">);</span>
    		   <span class="o">}</span>
    		<span class="o">}</span>
    	<span class="o">}</span>
    	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">writeOut</span><span class="o">(</span><span class="n">String</span> <span class="n">file</span><span class="o">,</span> <span class="n">String</span> <span class="n">conent</span><span class="o">)</span> <span class="o">{</span>   
    		<span class="cm">/*	文件写出函数 */</span>
            <span class="n">BufferedWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>   
            <span class="k">try</span> <span class="o">{</span>   
                <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedWriter</span><span class="o">(</span><span class="k">new</span> <span class="n">OutputStreamWriter</span><span class="o">(</span><span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="kc">false</span><span class="o">)));</span>   
                <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">conent</span><span class="o">);</span>   
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>   
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>   
            <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>   
                <span class="k">try</span> <span class="o">{</span>   
                <span class="k">if</span><span class="o">(</span><span class="n">out</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
                <span class="n">out</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>   
                    <span class="o">}</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>   
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>   
                <span class="o">}</span>   
            <span class="o">}</span>   
        <span class="o">}</span>   
    <span class="o">}</span>
</code></pre></div></div> <p>程序流程结构如下：</p> <p><img src="../img/3tdy2tsw.png" alt="流程示意图" title="流程示意图"></p> <p>运行结果:</p> <p><img src="../img/3tdy2tsw-2.png" alt="运行结果" title="运行结果"></p> <p><code class="highlighter-rouge">homework</code> - <code class="highlighter-rouge">2018/8/30 20:40 </code></p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="http://localhost:4000/tags/#homework" title="Pages tagged homework" class="tag"><span class="term">homework</span></a><a href="http://localhost:4000/tags/#%E4%BD%9C%E4%B8%9A" title="Pages tagged 作业" class="tag"><span class="term">作业</span></a><a href="http://localhost:4000/tags/#java" title="Pages tagged java" class="tag"><span class="term">java</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/%E6%89%93%E9%B1%BC%E6%99%92%E7%BD%91%E9%A2%98%E7%9B%AE/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/%E6%89%93%E9%B1%BC%E6%99%92%E7%BD%91%E9%A2%98%E7%9B%AE/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=http://localhost:4000/%E6%89%93%E9%B1%BC%E6%99%92%E7%BD%91%E9%A2%98%E7%9B%AE/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"> <div id="lv-container" data-id="city" data-uid="MTAyMC8zMTk5MC84NTU0"> <script type="text/javascript"> (function(d, s) { var j, e = d.getElementsByTagName(s)[0]; if (typeof LivereTower === 'function') { return; } j = d.createElement(s); j.src = 'https://cdn-city.livere.com/js/embed.dist.js'; j.async = true; e.parentNode.insertBefore(j, e); })(document, 'script'); </script> <noscript>为正常使用来必力评论功能请激活JavaScript</noscript> </div> </section> </header> <!-- JS --> <script src="http://localhost:4000/assets/js/jquery-1.12.0.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.dlmenu.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.goup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.magnific-popup.min.js"></script> <script src="http://localhost:4000/assets/js/jquery.fitvid.min.js"></script> <script src="http://localhost:4000/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'neteen-blog'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
